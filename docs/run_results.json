{"metadata": {"dbt_schema_version": "https://schemas.getdbt.com/dbt/run-results/v6.json", "dbt_version": "1.11.2", "generated_at": "2026-02-26T09:56:58.504569Z", "invocation_id": "f4a701ee-003e-413f-8d9d-fcaf55a9bb0e", "invocation_started_at": "2026-02-26T09:56:39.111140Z", "env": {}}, "results": [{"status": "success", "timing": [{"name": "compile", "started_at": "2026-02-26T09:56:58.412267Z", "completed_at": "2026-02-26T09:56:58.436930Z"}, {"name": "execute", "started_at": "2026-02-26T09:56:58.437816Z", "completed_at": "2026-02-26T09:56:58.437860Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.029757976531982422, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.ga4_product_analytics.stg_ga4__event_params", "compiled": true, "compiled_code": "with events as (\n\n  select\n    event_date,\n    event_timestamp,\n    user_pseudo_id as user_id,\n    event_name,\n    event_params\n  from `bigquery-public-data`.`ga4_obfuscated_sample_ecommerce`.`events_*`\n\n),\n\nunnested as (\n\n  select\n    event_date,\n    timestamp_micros(event_timestamp) as event_ts,\n    user_id,\n    event_name,\n\n    -- one row per param\n    ep.key as param_key,\n\n    -- GA4 stores values in different typed fields; keep them all\n    ep.value.string_value as param_string_value,\n    ep.value.int_value as param_int_value,\n    ep.value.float_value as param_float_value,\n    ep.value.double_value as param_double_value\n\n  from events,\n  unnest(event_params) as ep\n\n)\n\nselect * from unnested", "relation_name": "`ga4-product-analytics-485709`.`stg`.`stg_ga4__event_params`", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-02-26T09:56:58.429369Z", "completed_at": "2026-02-26T09:56:58.438684Z"}, {"name": "execute", "started_at": "2026-02-26T09:56:58.440599Z", "completed_at": "2026-02-26T09:56:58.440614Z"}], "thread_id": "Thread-2 (worker)", "execution_time": 0.031198978424072266, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.ga4_product_analytics.stg_ga4__events", "compiled": true, "compiled_code": "with source as (\n\n  select *\n  from `bigquery-public-data`.`ga4_obfuscated_sample_ecommerce`.`events_*`\n\n),\n\nrenamed as (\n\n  select\n    event_date,\n    timestamp_micros(event_timestamp) as event_ts,\n    event_name,\n    user_pseudo_id as user_id,\n    device.category as device_category,\n    geo.country as country,\n    traffic_source.source as traffic_source,\n    traffic_source.medium as traffic_medium\n  from source\n\n)\n\nselect * from renamed", "relation_name": "`ga4-product-analytics-485709`.`stg`.`stg_ga4__events`", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-02-26T09:56:58.444803Z", "completed_at": "2026-02-26T09:56:58.451361Z"}, {"name": "execute", "started_at": "2026-02-26T09:56:58.451977Z", "completed_at": "2026-02-26T09:56:58.451993Z"}], "thread_id": "Thread-4 (worker)", "execution_time": 0.009258031845092773, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.ga4_product_analytics.int_ga4__events_enriched", "compiled": true, "compiled_code": "\n\nwith events as (\n\n  select *\n  from `ga4-product-analytics-485709`.`stg`.`stg_ga4__events`\n\n),\n\nparams as (\n\n  select\n    event_date,\n    event_ts,\n    user_id,\n    event_name,\n\n    -- Extract a few key params (extend later if needed)\n    max(case when param_key = 'ga_session_id' then cast(param_int_value as string) end) as ga_session_id,\n    max(case when param_key = 'page_location' then param_string_value end) as page_location,\n    max(case when param_key = 'page_referrer' then param_string_value end) as page_referrer\n\n  from `ga4-product-analytics-485709`.`stg`.`stg_ga4__event_params`\n  group by 1,2,3,4\n\n),\n\njoined as (\n\n  select\n    e.event_date,\n    e.event_ts,\n    e.event_name,\n    e.user_id,\n    e.device_category,\n    e.country,\n    e.traffic_source,\n    case\n      when lower(traffic_medium) = 'cpc' then 'paid'\n      when lower(traffic_medium) = 'organic' then 'organic'\n      when lower(traffic_medium) = 'referral' then 'referral'\n      when traffic_medium in ('(none)', '(not set)') then 'direct'\n      when traffic_medium is null or traffic_medium = '(data deleted)' then 'unknown'\n      when traffic_medium = '<Other>' or lower(traffic_medium) = '<other>' then 'other'\n      else 'other'\n    end as channel_group,\n    e.traffic_medium,\n    p.ga_session_id,\n    -- session_id stable for analysis\n    case\n      when p.ga_session_id is not null then concat(e.user_id, '-', p.ga_session_id)\n    end as session_id,\n\n    p.page_location,\n    p.page_referrer\n\n  from events e\n  left join params p\n    on e.event_date = p.event_date\n   and e.event_ts = p.event_ts\n   and e.user_id = p.user_id\n   and e.event_name = p.event_name\n\n)\n\nselect * from joined", "relation_name": "`ga4-product-analytics-485709`.`stg`.`int_ga4__events_enriched`", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-02-26T09:56:58.457144Z", "completed_at": "2026-02-26T09:56:58.463231Z"}, {"name": "execute", "started_at": "2026-02-26T09:56:58.464261Z", "completed_at": "2026-02-26T09:56:58.464282Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.009940147399902344, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.ga4_product_analytics.int_ga4__funnel_steps", "compiled": true, "compiled_code": "\n\nwith events as (\n\n  select *\n  from `ga4-product-analytics-485709`.`stg`.`int_ga4__events_enriched`\n  where session_id is not null\n\n),\n\nsession_steps as (\n\n  select\n    event_date,\n    session_id,\n    user_id,\n\n    -- dimensions for slicing\n    any_value(device_category) as device_category,\n    any_value(traffic_source) as traffic_source,\n    any_value(traffic_medium) as traffic_medium,\n    any_value(channel_group) as channel_group,\n    any_value(country) as country,\n\n    -- step flags (did the session contain at least one such event?)\n    max(case when event_name = 'view_item' then 1 else 0 end) as did_view_item,\n    max(case when event_name = 'add_to_cart' then 1 else 0 end) as did_add_to_cart,\n    max(case when event_name = 'begin_checkout' then 1 else 0 end) as did_begin_checkout,\n    max(case when event_name = 'purchase' then 1 else 0 end) as did_purchase\n\n  from events\n  group by 1,2,3\n\n)\n\nselect * from session_steps", "relation_name": "`ga4-product-analytics-485709`.`stg`.`int_ga4__funnel_steps`", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-02-26T09:56:58.480333Z", "completed_at": "2026-02-26T09:56:58.491001Z"}, {"name": "execute", "started_at": "2026-02-26T09:56:58.492673Z", "completed_at": "2026-02-26T09:56:58.492690Z"}], "thread_id": "Thread-4 (worker)", "execution_time": 0.022881031036376953, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.ga4_product_analytics.fct_funnel_by_device", "compiled": true, "compiled_code": "with sessions as (\n\n  select *\n  from `ga4-product-analytics-485709`.`stg`.`int_ga4__funnel_steps`\n\n),\n\nagg as (\n\n  select\n    device_category,\n\n    count(*) as sessions,\n\n    sum(did_view_item) as sessions_view_item,\n    sum(did_add_to_cart) as sessions_add_to_cart,\n    sum(did_begin_checkout) as sessions_begin_checkout,\n    sum(did_purchase) as sessions_purchase\n\n  from sessions\n  group by 1\n\n)\n\nselect\n  device_category,\n  sessions,\n  sessions_view_item,\n  sessions_add_to_cart,\n  sessions_begin_checkout,\n  sessions_purchase,\n\n  safe_divide(sessions_add_to_cart, sessions_view_item) as view_to_cart_rate,\n  safe_divide(sessions_begin_checkout, sessions_add_to_cart) as cart_to_checkout_rate,\n  safe_divide(sessions_purchase, sessions_begin_checkout) as checkout_to_purchase_rate,\n  safe_divide(sessions_purchase, sessions_view_item) as overall_conversion_rate\n\nfrom agg\norder by overall_conversion_rate desc", "relation_name": "`ga4-product-analytics-485709`.`marts`.`fct_funnel_by_device`", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-02-26T09:56:58.475606Z", "completed_at": "2026-02-26T09:56:58.491863Z"}, {"name": "execute", "started_at": "2026-02-26T09:56:58.493846Z", "completed_at": "2026-02-26T09:56:58.493860Z"}], "thread_id": "Thread-3 (worker)", "execution_time": 0.026810169219970703, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.ga4_product_analytics.fct_funnel_by_channel", "compiled": true, "compiled_code": "with sessions as (\n\n  select *\n  from `ga4-product-analytics-485709`.`stg`.`int_ga4__funnel_steps`\n\n),\n\nagg as (\n\n  select\n    channel_group,\n    count(*) as sessions,\n\n    sum(did_view_item) as sessions_view_item,\n    sum(did_add_to_cart) as sessions_add_to_cart,\n    sum(did_begin_checkout) as sessions_begin_checkout,\n    sum(did_purchase) as sessions_purchase\n\n  from sessions\n  group by 1\n\n)\n\nselect\n  channel_group,\n  sessions,\n  sessions_view_item,\n  sessions_add_to_cart,\n  sessions_begin_checkout,\n  sessions_purchase,\n\n  safe_divide(sessions_add_to_cart, sessions_view_item) as view_to_cart_rate,\n  safe_divide(sessions_begin_checkout, sessions_add_to_cart) as cart_to_checkout_rate,\n  safe_divide(sessions_purchase, sessions_begin_checkout) as checkout_to_purchase_rate,\n  safe_divide(sessions_purchase, sessions_view_item) as overall_conversion_rate\n\nfrom agg\norder by overall_conversion_rate desc", "relation_name": "`ga4-product-analytics-485709`.`marts`.`fct_funnel_by_channel`", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-02-26T09:56:58.484486Z", "completed_at": "2026-02-26T09:56:58.493273Z"}, {"name": "execute", "started_at": "2026-02-26T09:56:58.495807Z", "completed_at": "2026-02-26T09:56:58.495821Z"}], "thread_id": "Thread-2 (worker)", "execution_time": 0.024348974227905273, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.ga4_product_analytics.fct_funnel_daily", "compiled": true, "compiled_code": "with steps as (\n\n  select *\n  from `ga4-product-analytics-485709`.`stg`.`int_ga4__funnel_steps`\n\n),\n\nagg as (\n\n  select\n    event_date,\n    device_category,\n    traffic_source,\n    channel_group,\n    traffic_medium,\n    country,\n\n    count(distinct session_id) as sessions,\n\n    sum(did_view_item) as sessions_with_view_item,\n    sum(did_add_to_cart) as sessions_with_add_to_cart,\n    sum(did_begin_checkout) as sessions_with_begin_checkout,\n    sum(did_purchase) as sessions_with_purchase,\n\n    safe_divide(sum(did_add_to_cart), nullif(sum(did_view_item), 0)) as cart_rate_from_view,\n    safe_divide(sum(did_begin_checkout), nullif(sum(did_add_to_cart), 0)) as checkout_rate_from_cart,\n    safe_divide(sum(did_purchase), nullif(sum(did_begin_checkout), 0)) as purchase_rate_from_checkout,\n    safe_divide(sum(did_purchase), nullif(sum(did_view_item), 0)) as purchase_rate_from_view\n\n  from steps\n  group by 1,2,3,4,5,6\n\n)\n\nselect * from agg", "relation_name": "`ga4-product-analytics-485709`.`marts`.`fct_funnel_daily`", "batch_results": null}], "elapsed_time": 2.5588438510894775, "args": {"upload_to_artifacts_ingest_api": false, "populate_cache": true, "show_resource_report": false, "static": false, "warn_error_options": {"error": [], "warn": [], "silence": []}, "use_colors": true, "require_resource_names_without_spaces": true, "which": "generate", "select": [], "partial_parse_file_diff": true, "log_file_max_bytes": 10485760, "require_batched_execution_for_custom_microbatch_strategy": false, "favor_state": false, "require_all_warnings_handled_by_warn_error": false, "log_format_file": "debug", "empty_catalog": false, "log_level_file": "debug", "source_freshness_run_project_hooks": true, "validate_macro_args": false, "version_check": true, "log_format": "default", "log_path": "/Users/philippegrevoz/Library/Mobile Documents/com~apple~CloudDocs/Portfolio/GA4 Product Analytics/ga4_product_analytics/logs", "exclude": [], "log_level": "info", "partial_parse": true, "require_generic_test_arguments_property": true, "require_nested_cumulative_type_params": false, "state_modified_compare_more_unrendered_values": false, "introspect": true, "printer_width": 80, "macro_debugging": false, "project_dir": "/Users/philippegrevoz/Library/Mobile Documents/com~apple~CloudDocs/Portfolio/GA4 Product Analytics/ga4_product_analytics", "invocation_command": "dbt docs generate", "write_json": true, "require_yaml_configuration_for_mf_time_spines": false, "vars": {}, "require_explicit_package_overrides_for_builtin_materializations": true, "print": true, "use_colors_file": true, "static_parser": true, "send_anonymous_usage_stats": true, "use_fast_test_edges": false, "require_ref_searches_node_package_before_root": false, "cache_selected_only": false, "profiles_dir": "/Users/philippegrevoz/.dbt", "quiet": false, "require_unique_project_resource_names": false, "show_all_deprecations": false, "strict_mode": false, "skip_nodes_if_on_run_start_fails": false, "defer": false, "indirect_selection": "eager", "compile": true, "state_modified_compare_vars": false}}